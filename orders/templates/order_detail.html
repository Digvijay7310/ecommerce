{% extends "base.html" %}
{% block content %}

<h2 class="text-2xl font-bold text-center text-green-700 mb-6">
  ðŸ›’ Order Details
</h2>

<p class="text-center mb-6 text-sm">
  Aapka order <b>#{{ order.id }}</b> ka status: 
  {% if order.is_paid %}
    Paid
  {% else %}
    Cash on Delivery
  {% endif %}
</p>

<div class="grid grid-cols-1 lg:grid-cols-3 gap-6">

  <!-- LEFT: ORDERED ITEMS -->
  <div class="lg:col-span-2 bg-white shadow rounded p-4">
    <h3 class="text-lg font-semibold mb-4">Ordered Items</h3>

    {% for item in items %}
    <div class="flex gap-4 items-center border-b py-3">

      <!-- Product Image -->
      <img src="{{ item.product.main_image.url }}"
           class="w-16 h-16 sm:w-20 sm:h-20 object-cover rounded">

      <!-- Product Info -->
      <div class="flex-1">
        <p class="font-semibold">{{ item.product.name }}</p>
        <p class="text-sm text-gray-600">
          Quantity: {{ item.quantity }}
        </p>
      </div>

      <!-- Price -->
      <p class="font-semibold">
        â‚¹{{ item.price|floatformat:0 }}
      </p>
    </div>
    {% endfor %}
  </div>

  <!-- RIGHT: DELIVERY & ORDER INFO -->
  <div class="bg-white shadow rounded p-4 h-fit">
    <h3 class="text-lg font-semibold mb-3">Delivery Details</h3>

    <p class="text-sm mb-2">
      <b>Name:</b> {{ order.full_name }}
    </p>

    <p class="text-sm mb-2">
      <b>Address:</b><br>
      {{ order.address }}, {{ order.city }} - {{ order.pincode }}
    </p>

    <p class="text-sm mb-2">
      <b>Email:</b> {{ order.email }}
    </p>

    <p class="text-sm mb-2">
      <b>Phone:</b> {{ order.phone }}
    </p>

    <p class="text-sm mb-2">
      <b>Payment Method:</b> 
      {% if order.payment_method == "COD" %}
        Cash on Delivery
      {% else %}
        {{ order.payment_method }}
      {% endif %}
    </p>

    <p class="text-sm mb-3">
      <b>Delivery Date:</b> {{ order.delivery_date }}
    </p>

    <hr class="my-3">

    <p class="flex justify-between font-bold">
      <span>Total Amount</span>
      <span>â‚¹{{ total }}</span>
    </p>
  </div>

</div>

{% endblock %}
